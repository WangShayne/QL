<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="Generator" content="EditPlus®">
	<meta name="Author" content="">
	<meta name="Keywords" content="">
	<meta name="Description" content="">
	<title>Document</title>
	<style>
		.suggest{
			position:absolute;
			border:1px solid #aaa;
			width:171px;
			display:none;
		}
		.suggest ul{
			list-style:none;
			padding:0;
			margin:0;
		}
		.suggest ul li{
			line-height:1.6em;
			cursor:pointer;
			padding-left:10px;
		}
		.suggest ul li:hover{
			background:#eee;
		}
	</style>
</head>

<body>
	<h1>使用XHR接受服务器返回的响应--text/html</h1>
	<h3>仿写Google Suggest</h3>
	<input type="text" id="kw" placeholder="请输入搜索关键字..."><input type="button" value='谷歌搜索'>
	<div class="suggest">
		<ul>
<!-- 			<li>java</li> -->
<!-- 			<li>javascript</li> -->
<!-- 			<li>jdk</li> -->
<!-- 			<li>jms</li> -->
<!-- 			<li>js</li> -->
<!-- 			<li>jsp</li> --> 
		</ul>
	</div>	
	<script>
		kw.onkeyup=function(){
			var kw=this.value;
			var div=document.querySelector(".suggest");
			if(!kw){
				div.style.display='none';
				return;
			}else{
				var xhr=new XMLHttpRequest;
				xhr.onreadystatechange=function(){
					if(xhr.readyState===4){
						if(xhr.status===200){
							doResponse(xhr.responseText);
						}
					}
				}
				xhr.open('get','2_searchsuggest.php?kw='+kw,true);
				xhr.send(null);
				function doResponse(a){
							div.style.display="block";
							var ul=div.querySelector('ul');
							ul.innerHTML=(a);
				};
			};
		}
	
	</script>
</body>
</html>
